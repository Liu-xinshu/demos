/**
 * Cesium - https://github.com/AnalyticalGraphicsInc/cesium
 *
 * Copyright 2011-2017 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md for full licensing details.
 */
define(["./defined-b9ff0e39","./Check-e6691f86","./freezeObject-2d5b18ce","./defaultValue-199f5aa8","./Math-92bd3539","./Cartesian2-8fa798b8","./defineProperties-ae15c9d5","./objectToQuery-2e382d4d","./Transforms-c1305e13","./RuntimeError-d5522ee3","./WebGLConstants-554ddbe2","./ComponentDatatype-569c1e3e","./GeometryAttribute-7f79e7d6","./when-c208a7cf","./EncodedCartesian3-272794dc","./IntersectionTests-0268f2ee","./Plane-c6867c84","./WebMercatorProjection-3d8e7edb","./arrayRemoveDuplicates-1efed288","./ArcType-c72d871a","./EllipsoidRhumbLine-fb5cc30d","./EllipsoidGeodesic-b8e7c0c6","./GeographicTilingScheme-f1d9e13e"],function(G,a,e,p,Ha,Ba,n,c,Ga,t,r,ja,Va,i,Fa,j,s,o,V,F,q,T,l){"use strict";var u=new Ba.Cartesian3,C=new Ba.Cartesian3,d=new Ba.Cartographic,h=new Ba.Cartesian3,g=new Ba.Cartesian3,f=new Ga.BoundingSphere,m=new l.GeographicTilingScheme,w=[new Ba.Cartographic,new Ba.Cartographic,new Ba.Cartographic,new Ba.Cartographic],v=new Ba.Cartesian2,qa={};function y(a){Ba.Cartographic.fromRadians(a.east,a.north,0,w[0]),Ba.Cartographic.fromRadians(a.west,a.north,0,w[1]),Ba.Cartographic.fromRadians(a.east,a.south,0,w[2]),Ba.Cartographic.fromRadians(a.west,a.south,0,w[3]);var e,n=0,t=0,r=0,i=0,s=qa._terrainHeightsMaxLevel;for(e=0;e<=s;++e){for(var o=!1,l=0;l<4;++l){var u=w[l];if(m.positionToTileXY(u,e,v),0===l)r=v.x,i=v.y;else if(r!==v.x||i!==v.y){o=!0;break}}if(o)break;n=r,t=i}if(0!==e)return{x:n,y:t,level:s<e?s:e-1}}qa.initialize=function(){var a=qa._initPromise;return G.defined(a)?a:(a=Ga.Resource.fetchJson(Ga.buildModuleUrl("Assets/approximateTerrainHeights.json")).then(function(a){qa._terrainHeights=a}),qa._initPromise=a)},qa.getMinimumMaximumHeights=function(a,e){e=p.defaultValue(e,Ba.Ellipsoid.WGS84);var n=y(a),t=qa._defaultMinTerrainHeight,r=qa._defaultMaxTerrainHeight;if(G.defined(n)){var i=n.level+"-"+n.x+"-"+n.y,s=qa._terrainHeights[i];G.defined(s)&&(t=s[0],r=s[1]),e.cartographicToCartesian(Ba.Rectangle.northeast(a,d),u),e.cartographicToCartesian(Ba.Rectangle.southwest(a,d),C),Ba.Cartesian3.midpoint(C,u,h);var o=e.scaleToGeodeticSurface(h,g);if(G.defined(o)){var l=Ba.Cartesian3.distance(h,o);t=Math.min(t,-l)}else t=qa._defaultMinTerrainHeight}return{minimumTerrainHeight:t=Math.max(qa._defaultMinTerrainHeight,t),maximumTerrainHeight:r}},qa.getBoundingSphere=function(a,e){e=p.defaultValue(e,Ba.Ellipsoid.WGS84);var n=y(a),t=qa._defaultMaxTerrainHeight;if(G.defined(n)){var r=n.level+"-"+n.x+"-"+n.y,i=qa._terrainHeights[r];G.defined(i)&&(t=i[1])}var s=Ga.BoundingSphere.fromRectangle3D(a,e,0);return Ga.BoundingSphere.fromRectangle3D(a,e,t,f),Ga.BoundingSphere.union(s,f,s)},qa._terrainHeightsMaxLevel=6,qa._defaultMaxTerrainHeight=9e3,qa._defaultMinTerrainHeight=-1e5,qa._terrainHeights=void 0,qa._initPromise=void 0,n.defineProperties(qa,{initialized:{get:function(){return G.defined(qa._terrainHeights)}}});var W=[c.GeographicProjection,o.WebMercatorProjection],E=W.length,Wa=Math.cos(Ha.CesiumMath.toRadians(30)),M=Math.cos(Ha.CesiumMath.toRadians(150)),U=0,Y=1e3;function k(a){var e=(a=p.defaultValue(a,p.defaultValue.EMPTY_OBJECT)).positions;this.width=p.defaultValue(a.width,1),this._positions=e,this.granularity=p.defaultValue(a.granularity,9999),this.loop=p.defaultValue(a.loop,!1),this.arcType=p.defaultValue(a.arcType,F.ArcType.GEODESIC),this._ellipsoid=Ba.Ellipsoid.WGS84,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}n.defineProperties(k.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+Ba.Ellipsoid.packedLength+1+1}}}),k.setProjectionAndEllipsoid=function(a,e){for(var n=0,t=0;t<E;t++)if(e instanceof W[t]){n=t;break}a._projectionIndex=n,a._ellipsoid=e.ellipsoid};var P=new Ba.Cartesian3,S=new Ba.Cartesian3,_=new Ba.Cartesian3;function Q(a,e,n,t,r){var i=X(t,a,0,P),s=X(t,a,n,S),o=X(t,e,0,_),l=Ua(s,i,S),u=Ua(o,i,_);return Ba.Cartesian3.cross(u,l,r),Ba.Cartesian3.normalize(r,r)}var O=new Ba.Cartographic,b=new Ba.Cartesian3,A=new Ba.Cartesian3,I=new Ba.Cartesian3;function Z(a,e,n,t,r,i,s,o,l,u,c){if(0!==r){var C;i===F.ArcType.GEODESIC?C=new T.EllipsoidGeodesic(a,e,s):i===F.ArcType.RHUMB&&(C=new q.EllipsoidRhumbLine(a,e,s));var d=C.surfaceDistance;if(!(d<r))for(var p=Q(a,e,t,s,I),h=Math.ceil(d/r),g=d/h,f=g,m=h-1,w=o.length,v=0;v<m;v++){var y=C.interpolateUsingSurfaceDistance(f,O),E=X(s,y,n,b),M=X(s,y,t,A);Ba.Cartesian3.pack(p,o,w),Ba.Cartesian3.pack(E,l,w),Ba.Cartesian3.pack(M,u,w),c.push(y.latitude),c.push(y.longitude),w+=3,f+=g}}}var x=new Ba.Cartographic;function X(a,e,n,t){return Ba.Cartographic.clone(e,x),x.height=n,Ba.Cartographic.toCartesian(x,a,t)}function Ua(a,e,n){return Ba.Cartesian3.subtract(a,e,n),Ba.Cartesian3.normalize(n,n),n}function L(a,e,n,t){return t=Ua(a,e,t),t=Ba.Cartesian3.cross(t,n,t),t=Ba.Cartesian3.normalize(t,t),t=Ba.Cartesian3.cross(n,t,t)}k.pack=function(a,e,n){var t=p.defaultValue(n,0),r=a._positions,i=r.length;e[t++]=i;for(var s=0;s<i;++s){var o=r[s];Ba.Cartesian3.pack(o,e,t),t+=3}return e[t++]=a.granularity,e[t++]=a.loop?1:0,e[t++]=a.arcType,Ba.Ellipsoid.pack(a._ellipsoid,e,t),t+=Ba.Ellipsoid.packedLength,e[t++]=a._projectionIndex,e[t++]=a._scene3DOnly?1:0,e},k.unpack=function(a,e,n){for(var t=p.defaultValue(e,0),r=a[t++],i=new Array(r),s=0;s<r;s++)i[s]=Ba.Cartesian3.unpack(a,t),t+=3;var o=a[t++],l=1===a[t++],u=a[t++],c=Ba.Ellipsoid.unpack(a,t);t+=Ba.Ellipsoid.packedLength;var C=a[t++],d=1===a[t++];return G.defined(n)||(n=new k({positions:i})),n._positions=i,n.granularity=o,n.loop=l,n.arcType=u,n._ellipsoid=c,n._projectionIndex=C,n._scene3DOnly=d,n};var N=new Ba.Cartesian3,R=new Ba.Cartesian3,z=new Ba.Cartesian3,D=new Ba.Cartesian3;function J(a,e,n,t,r){var i=Ua(n,e,D),s=L(a,e,i,N),o=L(t,e,i,R);if(Ha.CesiumMath.equalsEpsilon(Ba.Cartesian3.dot(s,o),-1,Ha.CesiumMath.EPSILON5))return r=Ba.Cartesian3.cross(i,s,r),r=Ba.Cartesian3.normalize(r,r);r=Ba.Cartesian3.add(o,s,r),r=Ba.Cartesian3.normalize(r,r);var l=Ba.Cartesian3.cross(i,r,z);return Ba.Cartesian3.dot(o,l)<0&&(r=Ba.Cartesian3.negate(r,r)),r}var K=s.Plane.fromPointNormal(Ba.Cartesian3.ZERO,Ba.Cartesian3.UNIT_Y),$=new Ba.Cartesian3,aa=new Ba.Cartesian3,ea=new Ba.Cartesian3,na=new Ba.Cartesian3,ta=new Ba.Cartesian3,ra=new Ba.Cartesian3,ia=new Ba.Cartographic,sa=new Ba.Cartographic,oa=new Ba.Cartographic;k.createGeometry=function(a){var e,n,t,r,i,s,o=!a._scene3DOnly,l=a.loop,u=a._ellipsoid,c=a.granularity,C=a.arcType,d=new W[a._projectionIndex](u),p=U,h=Y,g=a._positions,f=g.length;2===f&&(l=!1);var m,w,v,y=new q.EllipsoidRhumbLine(void 0,void 0,u),E=[g[0]];for(n=0;n<f-1;n++)t=g[n],r=g[n+1],m=j.IntersectionTests.lineSegmentPlane(t,r,K,ra),!G.defined(m)||Ba.Cartesian3.equalsEpsilon(m,t,Ha.CesiumMath.EPSILON7)||Ba.Cartesian3.equalsEpsilon(m,r,Ha.CesiumMath.EPSILON7)||(a.arcType===F.ArcType.GEODESIC?E.push(Ba.Cartesian3.clone(m)):a.arcType===F.ArcType.RHUMB&&(v=u.cartesianToCartographic(m,ia).longitude,i=u.cartesianToCartographic(t,ia),s=u.cartesianToCartographic(r,sa),y.setEndPoints(i,s),w=y.findIntersectionWithLongitude(v,oa),m=u.cartographicToCartesian(w,ra),!G.defined(m)||Ba.Cartesian3.equalsEpsilon(m,t,Ha.CesiumMath.EPSILON7)||Ba.Cartesian3.equalsEpsilon(m,r,Ha.CesiumMath.EPSILON7)||E.push(Ba.Cartesian3.clone(m)))),E.push(r);l&&(t=g[f-1],r=g[0],m=j.IntersectionTests.lineSegmentPlane(t,r,K,ra),!G.defined(m)||Ba.Cartesian3.equalsEpsilon(m,t,Ha.CesiumMath.EPSILON7)||Ba.Cartesian3.equalsEpsilon(m,r,Ha.CesiumMath.EPSILON7)||(a.arcType===F.ArcType.GEODESIC?E.push(Ba.Cartesian3.clone(m)):a.arcType===F.ArcType.RHUMB&&(v=u.cartesianToCartographic(m,ia).longitude,i=u.cartesianToCartographic(t,ia),s=u.cartesianToCartographic(r,sa),y.setEndPoints(i,s),w=y.findIntersectionWithLongitude(v,oa),m=u.cartographicToCartesian(w,ra),!G.defined(m)||Ba.Cartesian3.equalsEpsilon(m,t,Ha.CesiumMath.EPSILON7)||Ba.Cartesian3.equalsEpsilon(m,r,Ha.CesiumMath.EPSILON7)||E.push(Ba.Cartesian3.clone(m)))));var M=E.length,T=new Array(M);for(n=0;n<M;n++){var k=Ba.Cartographic.fromCartesian(E[n],u);k.height=0,T[n]=k}if(!((M=(T=V.arrayRemoveDuplicates(T,Ba.Cartographic.equalsEpsilon)).length)<2)){var P=[],S=[],_=[],O=[],b=$,A=aa,I=ea,x=na,L=ta,N=T[0],R=T[1];for(b=X(u,T[M-1],p,b),x=X(u,R,p,x),A=X(u,N,p,A),I=X(u,N,h,I),L=l?J(b,A,I,x,L):Q(N,R,h,u,L),Ba.Cartesian3.pack(L,S,0),Ba.Cartesian3.pack(A,_,0),Ba.Cartesian3.pack(I,O,0),P.push(N.latitude),P.push(N.longitude),Z(N,R,p,h,c,C,u,S,_,O,P),n=1;n<M-1;++n){b=Ba.Cartesian3.clone(A,b),A=Ba.Cartesian3.clone(x,A);var z=T[n];X(u,z,h,I),X(u,T[n+1],p,x),J(b,A,I,x,L),e=S.length,Ba.Cartesian3.pack(L,S,e),Ba.Cartesian3.pack(A,_,e),Ba.Cartesian3.pack(I,O,e),P.push(z.latitude),P.push(z.longitude),Z(T[n],T[n+1],p,h,c,C,u,S,_,O,P)}var D=T[M-1],H=T[M-2];if(A=X(u,D,p,A),I=X(u,D,h,I),l){var B=T[0];L=J(b=X(u,H,p,b),A,I,x=X(u,B,p,x),L)}else L=Q(H,D,h,u,L);if(e=S.length,Ba.Cartesian3.pack(L,S,e),Ba.Cartesian3.pack(A,_,e),Ba.Cartesian3.pack(I,O,e),P.push(D.latitude),P.push(D.longitude),l){for(Z(D,N,p,h,c,C,u,S,_,O,P),e=S.length,n=0;n<3;++n)S[e+n]=S[n],_[e+n]=_[n],O[e+n]=O[n];P.push(N.latitude),P.push(N.longitude)}return function(a,e,n,t,r,i,s){var o,l,u,c,C,d,p=e._ellipsoid,h=n.length/3-1,g=8*h,f=4*g,m=36*h,w=65535<g?new Uint32Array(m):new Uint16Array(m),v=new Float64Array(3*g),y=new Float32Array(f),E=new Float32Array(f),M=new Float32Array(f),T=new Float32Array(f),k=new Float32Array(f);s&&(u=new Float32Array(f),c=new Float32Array(f),C=new Float32Array(f),d=new Float32Array(2*g));var P=i.length/2,S=0,_=Ka;_.height=0;var O=$a;O.height=0;var b=ae,A=ee;if(s)for(l=0,o=1;o<P;o++)_.latitude=i[l],_.longitude=i[l+1],O.latitude=i[l+2],O.longitude=i[l+3],b=e.project(_,b),A=e.project(O,A),S+=Ba.Cartesian3.distance(b,A),l+=2;var I=t.length/3;A=Ba.Cartesian3.unpack(t,0,A);var x,L=0;for(l=3,o=1;o<I;o++)b=Ba.Cartesian3.clone(A,b),A=Ba.Cartesian3.unpack(t,l,A),L+=Ba.Cartesian3.distance(b,A),l+=3;l=3;var N=0,R=0,z=0,D=0,H=!1,B=Ba.Cartesian3.unpack(n,0,te),G=Ba.Cartesian3.unpack(t,0,ee),j=Ba.Cartesian3.unpack(r,0,ie);if(a){var V=Ba.Cartesian3.unpack(n,n.length-6,ne);Ya(j,V,B,G)&&(j=Ba.Cartesian3.negate(j,j))}var F=0,q=0,W=0;for(o=0;o<h;o++){var U,Y,Q,Z,X=Ba.Cartesian3.clone(B,ne),J=Ba.Cartesian3.clone(G,ae),K=Ba.Cartesian3.clone(j,re);if(H&&(K=Ba.Cartesian3.negate(K,K)),B=Ba.Cartesian3.unpack(n,l,te),G=Ba.Cartesian3.unpack(t,l,ee),j=Ba.Cartesian3.unpack(r,l,ie),H=Ya(j,X,B,G),_.latitude=i[N],_.longitude=i[N+1],O.latitude=i[N+2],O.longitude=i[N+3],s){var $=Ja(_,O);U=e.project(_,de);var aa=Ua(Y=e.project(O,pe),U,ke);aa.y=Math.abs(aa.y),Q=he,Z=ge,0===$||Ba.Cartesian3.dot(aa,Ba.Cartesian3.UNIT_Y)>Wa?(Q=Qa(e,_,K,U,he),Z=Qa(e,O,j,Y,ge)):1===$?(Z=Qa(e,O,j,Y,ge),Q.x=0,Q.y=Ha.CesiumMath.sign(_.longitude-Math.abs(O.longitude)),Q.z=0):(Q=Qa(e,_,K,U,he),Z.x=0,Z.y=Ha.CesiumMath.sign(_.longitude-O.longitude),Z.z=0)}var ea=Ba.Cartesian3.distance(J,G),na=Fa.EncodedCartesian3.fromCartesian(X,Me),ta=Ba.Cartesian3.subtract(B,X,fe),ra=Ba.Cartesian3.normalize(ta,ve),ia=Ba.Cartesian3.subtract(J,X,me);ia=Ba.Cartesian3.normalize(ia,ia);var sa=Ba.Cartesian3.cross(ra,ia,ve);sa=Ba.Cartesian3.normalize(sa,sa);var oa=Ba.Cartesian3.cross(ia,K,ye);oa=Ba.Cartesian3.normalize(oa,oa);var la=Ba.Cartesian3.subtract(G,B,we);la=Ba.Cartesian3.normalize(la,la);var ua=Ba.Cartesian3.cross(j,la,Ee);ua=Ba.Cartesian3.normalize(ua,ua);var ca,Ca,da,pa=ea/L,ha=F/L,ga=0,fa=0,ma=0;if(s){ga=Ba.Cartesian3.distance(U,Y),ca=Fa.EncodedCartesian3.fromCartesian(U,Te),Ca=Ba.Cartesian3.subtract(Y,U,ke);var wa=(da=Ba.Cartesian3.normalize(Ca,Pe)).x;da.x=da.y,da.y=-wa,fa=ga/S,ma=q/S}for(x=0;x<8;x++){var va=D+4*x,ya=R+2*x,Ea=va+3,Ma=x<4?1:-1,Ta=2===x||3===x||6===x||7===x?1:-1;Ba.Cartesian3.pack(na.high,y,va),y[Ea]=ta.x,Ba.Cartesian3.pack(na.low,E,va),E[Ea]=ta.y,Ba.Cartesian3.pack(oa,M,va),M[Ea]=ta.z,Ba.Cartesian3.pack(ua,T,va),T[Ea]=pa*Ma,Ba.Cartesian3.pack(sa,k,va);var ka=ha*Ta;0===ka&&Ta<0&&(ka=9),k[Ea]=ka,s&&(u[va]=ca.high.x,u[va+1]=ca.high.y,u[va+2]=ca.low.x,u[va+3]=ca.low.y,C[va]=-Q.y,C[va+1]=Q.x,C[va+2]=Z.y,C[va+3]=-Z.x,c[va]=Ca.x,c[va+1]=Ca.y,c[va+2]=da.x,c[va+3]=da.y,d[ya]=fa*Ma,0===(ka=ma*Ta)&&Ta<0&&(ka=9),d[ya+1]=ka)}var Pa=ce,Sa=Ce,_a=le,Oa=ue,ba=Ba.Rectangle.fromCartographicArray(se,oe),Aa=qa.getMinimumMaximumHeights(ba,p),Ia=Aa.minimumTerrainHeight,xa=Aa.maximumTerrainHeight;W+=Ia,W+=xa,Za(X,J,Ia,xa,Pa,_a),Za(B,G,Ia,xa,Sa,Oa);var La=Ba.Cartesian3.multiplyByScalar(sa,Ha.CesiumMath.EPSILON5,Se);Ba.Cartesian3.add(Pa,La,Pa),Ba.Cartesian3.add(Sa,La,Sa),Ba.Cartesian3.add(_a,La,_a),Ba.Cartesian3.add(Oa,La,Oa),Xa(Pa,Sa),Xa(_a,Oa),Ba.Cartesian3.pack(Pa,v,z),Ba.Cartesian3.pack(Sa,v,z+3),Ba.Cartesian3.pack(Oa,v,z+6),Ba.Cartesian3.pack(_a,v,z+9),La=Ba.Cartesian3.multiplyByScalar(sa,-2*Ha.CesiumMath.EPSILON5,Se),Ba.Cartesian3.add(Pa,La,Pa),Ba.Cartesian3.add(Sa,La,Sa),Ba.Cartesian3.add(_a,La,_a),Ba.Cartesian3.add(Oa,La,Oa),Xa(Pa,Sa),Xa(_a,Oa),Ba.Cartesian3.pack(Pa,v,z+12),Ba.Cartesian3.pack(Sa,v,z+15),Ba.Cartesian3.pack(Oa,v,z+18),Ba.Cartesian3.pack(_a,v,z+21),N+=2,l+=3,R+=16,z+=24,D+=32,F+=ea,q+=ga}var Na=l=0;for(o=0;o<h;o++){for(x=0;x<be;x++)w[l+x]=Oe[x]+Na;Na+=8,l+=be}var Ra=_e;Ga.BoundingSphere.fromVertices(n,Ba.Cartesian3.ZERO,3,Ra[0]),Ga.BoundingSphere.fromVertices(t,Ba.Cartesian3.ZERO,3,Ra[1]);var za=Ga.BoundingSphere.fromBoundingSpheres(Ra);za.radius+=W/(2*h);var Da={position:new Va.GeometryAttribute({componentDatatype:ja.ComponentDatatype.DOUBLE,componentsPerAttribute:3,normalize:!1,values:v}),startHiAndForwardOffsetX:Ae(y),startLoAndForwardOffsetY:Ae(E),startNormalAndForwardOffsetZ:Ae(M),endNormalAndTextureCoordinateNormalizationX:Ae(T),rightNormalAndTextureCoordinateNormalizationY:Ae(k)};s&&(Da.startHiLo2D=Ae(u),Da.offsetAndRight2D=Ae(c),Da.startEndNormals2D=Ae(C),Da.texcoordNormalization2D=new Va.GeometryAttribute({componentDatatype:ja.ComponentDatatype.FLOAT,componentsPerAttribute:2,normalize:!1,values:d}));return new Va.Geometry({attributes:Da,indices:w,boundingSphere:za})}(l,d,_,O,S,P,o)}};var H=new Ba.Cartesian3,B=new c.Matrix3,la=new Ga.Quaternion;function Ya(a,e,n,t){var r=Ua(n,e,H),i=Ba.Cartesian3.dot(r,a);if(Wa<i||i<M){var s=Ua(t,n,D),o=i<M?Ha.CesiumMath.PI_OVER_TWO:-Ha.CesiumMath.PI_OVER_TWO,l=Ga.Quaternion.fromAxisAngle(s,o,la),u=c.Matrix3.fromQuaternion(l,B);return c.Matrix3.multiplyByVector(u,a,a),!0}return!1}var ua=new Ba.Cartographic,ca=new Ba.Cartesian3,Ca=new Ba.Cartesian3;function Qa(a,e,n,t,r){var i=Ba.Cartographic.toCartesian(e,a._ellipsoid,ca),s=Ba.Cartesian3.add(i,n,Ca),o=!1,l=a._ellipsoid,u=l.cartesianToCartographic(s,ua);Math.abs(e.longitude-u.longitude)>Ha.CesiumMath.PI_OVER_TWO&&(o=!0,s=Ba.Cartesian3.subtract(i,n,Ca),u=l.cartesianToCartographic(s,ua)),u.height=0;var c=a.project(u,r);return(r=Ba.Cartesian3.subtract(c,t,r)).z=0,r=Ba.Cartesian3.normalize(r,r),o&&Ba.Cartesian3.negate(r,r),r}var da=new Ba.Cartesian3,pa=new Ba.Cartesian3;function Za(a,e,n,t,r,i){var s=Ba.Cartesian3.subtract(e,a,da);Ba.Cartesian3.normalize(s,s);var o=n-U,l=Ba.Cartesian3.multiplyByScalar(s,o,pa);Ba.Cartesian3.add(a,l,r);var u=t-Y;l=Ba.Cartesian3.multiplyByScalar(s,u,pa),Ba.Cartesian3.add(e,l,i)}var ha=new Ba.Cartesian3;function Xa(a,e){var n=s.Plane.getPointDistance(K,a),t=s.Plane.getPointDistance(K,e),r=ha;Ha.CesiumMath.equalsEpsilon(n,0,Ha.CesiumMath.EPSILON2)?(r=Ua(e,a,r),Ba.Cartesian3.multiplyByScalar(r,Ha.CesiumMath.EPSILON2,r),Ba.Cartesian3.add(a,r,a)):Ha.CesiumMath.equalsEpsilon(t,0,Ha.CesiumMath.EPSILON2)&&(r=Ua(a,e,r),Ba.Cartesian3.multiplyByScalar(r,Ha.CesiumMath.EPSILON2,r),Ba.Cartesian3.add(e,r,e))}function Ja(a,e){var n=Math.abs(a.longitude),t=Math.abs(e.longitude);if(Ha.CesiumMath.equalsEpsilon(n,Ha.CesiumMath.PI,Ha.CesiumMath.EPSILON11)){var r=Ha.CesiumMath.sign(e.longitude);return a.longitude=r*(n-Ha.CesiumMath.EPSILON11),1}if(Ha.CesiumMath.equalsEpsilon(t,Ha.CesiumMath.PI,Ha.CesiumMath.EPSILON11)){var i=Ha.CesiumMath.sign(a.longitude);return e.longitude=i*(t-Ha.CesiumMath.EPSILON11),2}return 0}var Ka=new Ba.Cartographic,$a=new Ba.Cartographic,ae=new Ba.Cartesian3,ee=new Ba.Cartesian3,ne=new Ba.Cartesian3,te=new Ba.Cartesian3,re=new Ba.Cartesian3,ie=new Ba.Cartesian3,se=[Ka,$a],oe=new Ba.Rectangle,le=new Ba.Cartesian3,ue=new Ba.Cartesian3,ce=new Ba.Cartesian3,Ce=new Ba.Cartesian3,de=new Ba.Cartesian3,pe=new Ba.Cartesian3,he=new Ba.Cartesian3,ge=new Ba.Cartesian3,fe=new Ba.Cartesian3,me=new Ba.Cartesian3,we=new Ba.Cartesian3,ve=new Ba.Cartesian3,ye=new Ba.Cartesian3,Ee=new Ba.Cartesian3,Me=new Fa.EncodedCartesian3,Te=new Fa.EncodedCartesian3,ke=new Ba.Cartesian3,Pe=new Ba.Cartesian3,Se=new Ba.Cartesian3,_e=[new Ga.BoundingSphere,new Ga.BoundingSphere],Oe=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],be=Oe.length;function Ae(a){return new Va.GeometryAttribute({componentDatatype:ja.ComponentDatatype.FLOAT,componentsPerAttribute:4,normalize:!1,values:a})}return k._projectNormal=Qa,function(a,e){return qa.initialize().then(function(){return G.defined(e)&&(a=k.unpack(a,e)),k.createGeometry(a)})}});
