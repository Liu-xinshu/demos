/**
 * Cesium - https://github.com/AnalyticalGraphicsInc/cesium
 *
 * Copyright 2011-2017 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md for full licensing details.
 */
define(["exports","./defined-b9ff0e39","./Check-e6691f86","./freezeObject-2d5b18ce","./defaultValue-199f5aa8","./Math-92bd3539","./Cartesian2-8fa798b8","./defineProperties-ae15c9d5"],function(e,C,t,n,f,h,o,r){"use strict";function a(e){this._ellipsoid=f.defaultValue(e,o.Ellipsoid.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}function b(e,t,n,r,a,i,o,u,s){this[0]=f.defaultValue(e,0),this[1]=f.defaultValue(r,0),this[2]=f.defaultValue(o,0),this[3]=f.defaultValue(t,0),this[4]=f.defaultValue(a,0),this[5]=f.defaultValue(u,0),this[6]=f.defaultValue(n,0),this[7]=f.defaultValue(i,0),this[8]=f.defaultValue(s,0)}r.defineProperties(a.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),a.prototype.project=function(e,t){var n=this._semimajorAxis,r=e.longitude*n,a=e.latitude*n,i=e.height;return C.defined(t)?(t.x=r,t.y=a,t.z=i,t):new o.Cartesian3(r,a,i)},a.prototype.unproject=function(e,t){var n=this._oneOverSemimajorAxis,r=e.x*n,a=e.y*n,i=e.z;return C.defined(t)?(t.longitude=r,t.latitude=a,t.height=i,t):new o.Cartographic(r,a,i)},b.packedLength=9,b.pack=function(e,t,n){return n=f.defaultValue(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t},b.unpack=function(e,t,n){return t=f.defaultValue(t,0),C.defined(n)||(n=new b),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n[4]=e[t++],n[5]=e[t++],n[6]=e[t++],n[7]=e[t++],n[8]=e[t++],n},b.clone=function(e,t){if(C.defined(e))return C.defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new b(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},b.fromArray=function(e,t,n){return t=f.defaultValue(t,0),C.defined(n)||(n=new b),n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],n[4]=e[t+4],n[5]=e[t+5],n[6]=e[t+6],n[7]=e[t+7],n[8]=e[t+8],n},b.fromColumnMajorArray=function(e,t){return b.clone(e,t)},b.fromRowMajorArray=function(e,t){return C.defined(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new b(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},b.fromQuaternion=function(e,t){var n=e.x*e.x,r=e.x*e.y,a=e.x*e.z,i=e.x*e.w,o=e.y*e.y,u=e.y*e.z,s=e.y*e.w,f=e.z*e.z,l=e.z*e.w,c=e.w*e.w,d=n-o-f+c,h=2*(r-l),m=2*(a+s),p=2*(r+l),y=o-n-f+c,M=2*(u-i),x=2*(a-s),g=2*(u+i),v=-n-o+f+c;return C.defined(t)?(t[0]=d,t[1]=p,t[2]=x,t[3]=h,t[4]=y,t[5]=g,t[6]=m,t[7]=M,t[8]=v,t):new b(d,h,m,p,y,M,x,g,v)},b.fromHeadingPitchRoll=function(e,t){var n=Math.cos(-e.pitch),r=Math.cos(-e.heading),a=Math.cos(e.roll),i=Math.sin(-e.pitch),o=Math.sin(-e.heading),u=Math.sin(e.roll),s=n*r,f=-a*o+u*i*r,l=u*o+a*i*r,c=n*o,d=a*r+u*i*o,h=-u*r+a*i*o,m=-i,p=u*n,y=a*n;return C.defined(t)?(t[0]=s,t[1]=c,t[2]=m,t[3]=f,t[4]=d,t[5]=p,t[6]=l,t[7]=h,t[8]=y,t):new b(s,f,l,c,d,h,m,p,y)},b.fromScale=function(e,t){return C.defined(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new b(e.x,0,0,0,e.y,0,0,0,e.z)},b.fromUniformScale=function(e,t){return C.defined(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new b(e,0,0,0,e,0,0,0,e)},b.fromCrossProduct=function(e,t){return C.defined(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new b(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},b.fromRotationX=function(e,t){var n=Math.cos(e),r=Math.sin(e);return C.defined(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=n,t[5]=r,t[6]=0,t[7]=-r,t[8]=n,t):new b(1,0,0,0,n,-r,0,r,n)},b.fromRotationY=function(e,t){var n=Math.cos(e),r=Math.sin(e);return C.defined(t)?(t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=1,t[5]=0,t[6]=r,t[7]=0,t[8]=n,t):new b(n,0,r,0,1,0,-r,0,n)},b.fromRotationZ=function(e,t){var n=Math.cos(e),r=Math.sin(e);return C.defined(t)?(t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new b(n,-r,0,r,n,0,0,0,1)},b.toArray=function(e,t){return C.defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},b.getElementIndex=function(e,t){return 3*e+t},b.getColumn=function(e,t,n){var r=3*t,a=e[r],i=e[1+r],o=e[2+r];return n.x=a,n.y=i,n.z=o,n},b.setColumn=function(e,t,n,r){var a=3*t;return(r=b.clone(e,r))[a]=n.x,r[1+a]=n.y,r[2+a]=n.z,r},b.getRow=function(e,t,n){var r=e[t],a=e[t+3],i=e[t+6];return n.x=r,n.y=a,n.z=i,n},b.setRow=function(e,t,n,r){return(r=b.clone(e,r))[t]=n.x,r[t+3]=n.y,r[t+6]=n.z,r};var i=new o.Cartesian3;b.getScale=function(e,t){return t.x=o.Cartesian3.magnitude(o.Cartesian3.fromElements(e[0],e[1],e[2],i)),t.y=o.Cartesian3.magnitude(o.Cartesian3.fromElements(e[3],e[4],e[5],i)),t.z=o.Cartesian3.magnitude(o.Cartesian3.fromElements(e[6],e[7],e[8],i)),t};var u=new o.Cartesian3;b.getMaximumScale=function(e){return b.getScale(e,u),o.Cartesian3.maximumComponent(u)},b.multiply=function(e,t,n){var r=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],a=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],i=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],o=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],u=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],s=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],f=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],l=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],c=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return n[0]=r,n[1]=a,n[2]=i,n[3]=o,n[4]=u,n[5]=s,n[6]=f,n[7]=l,n[8]=c,n},b.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n},b.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n},b.multiplyByVector=function(e,t,n){var r=t.x,a=t.y,i=t.z,o=e[0]*r+e[3]*a+e[6]*i,u=e[1]*r+e[4]*a+e[7]*i,s=e[2]*r+e[5]*a+e[8]*i;return n.x=o,n.y=u,n.z=s,n},b.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n},b.multiplyByScale=function(e,t,n){return n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.x,n[3]=e[3]*t.y,n[4]=e[4]*t.y,n[5]=e[5]*t.y,n[6]=e[6]*t.z,n[7]=e[7]*t.z,n[8]=e[8]*t.z,n},b.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},b.transpose=function(e,t){var n=e[0],r=e[3],a=e[6],i=e[1],o=e[4],u=e[7],s=e[2],f=e[5],l=e[8];return t[0]=n,t[1]=r,t[2]=a,t[3]=i,t[4]=o,t[5]=u,t[6]=s,t[7]=f,t[8]=l,t};var s=new o.Cartesian3(1,1,1);b.getRotation=function(e,t){var n=o.Cartesian3.divideComponents(s,b.getScale(e,u),u);return t=b.multiplyByScale(e,n,t)};var m=[1,0,0],p=[2,2,1];function l(e){for(var t=0,n=0;n<3;++n){var r=e[b.getElementIndex(p[n],m[n])];t+=2*r*r}return Math.sqrt(t)}function c(e,t){for(var n=h.CesiumMath.EPSILON15,r=0,a=1,i=0;i<3;++i){var o=Math.abs(e[b.getElementIndex(p[i],m[i])]);r<o&&(a=i,r=o)}var u=1,s=0,f=m[a],l=p[a];if(Math.abs(e[b.getElementIndex(l,f)])>n){var c,d=(e[b.getElementIndex(l,l)]-e[b.getElementIndex(f,f)])/2/e[b.getElementIndex(l,f)];s=(c=d<0?-1/(-d+Math.sqrt(1+d*d)):1/(d+Math.sqrt(1+d*d)))*(u=1/Math.sqrt(1+c*c))}return(t=b.clone(b.IDENTITY,t))[b.getElementIndex(f,f)]=t[b.getElementIndex(l,l)]=u,t[b.getElementIndex(l,f)]=s,t[b.getElementIndex(f,l)]=-s,t}var d=new b,y=new b;b.computeEigenDecomposition=function(e,t){var n=h.CesiumMath.EPSILON20,r=0,a=0;C.defined(t)||(t={});for(var i=t.unitary=b.clone(b.IDENTITY,t.unitary),o=t.diagonal=b.clone(e,t.diagonal),u=n*function(e){for(var t=0,n=0;n<9;++n){var r=e[n];t+=r*r}return Math.sqrt(t)}(o);a<10&&l(o)>u;)c(o,d),b.transpose(d,y),b.multiply(o,d,o),b.multiply(y,o,o),b.multiply(i,d,i),2<++r&&(++a,r=0);return t},b.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},b.determinant=function(e){var t=e[0],n=e[3],r=e[6],a=e[1],i=e[4],o=e[7],u=e[2],s=e[5],f=e[8];return t*(i*f-s*o)+a*(s*r-n*f)+u*(n*o-i*r)},b.inverse=function(e,t){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=e[6],f=e[7],l=e[8],c=b.determinant(e);return t[0]=o*l-f*u,t[1]=f*a-r*l,t[2]=r*u-o*a,t[3]=s*u-i*l,t[4]=n*l-s*a,t[5]=i*a-n*u,t[6]=i*f-s*o,t[7]=s*r-n*f,t[8]=n*o-i*r,b.multiplyByScalar(t,1/c,t)},b.equals=function(e,t){return e===t||C.defined(e)&&C.defined(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},b.equalsEpsilon=function(e,t,n){return e===t||C.defined(e)&&C.defined(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n},b.IDENTITY=n.freezeObject(new b(1,0,0,0,1,0,0,0,1)),b.ZERO=n.freezeObject(new b(0,0,0,0,0,0,0,0,0)),b.COLUMN0ROW0=0,b.COLUMN0ROW1=1,b.COLUMN0ROW2=2,b.COLUMN1ROW0=3,b.COLUMN1ROW1=4,b.COLUMN1ROW2=5,b.COLUMN2ROW0=6,b.COLUMN2ROW1=7,b.COLUMN2ROW2=8,r.defineProperties(b.prototype,{length:{get:function(){return b.packedLength}}}),b.prototype.clone=function(e){return b.clone(this,e)},b.prototype.equals=function(e){return b.equals(this,e)},b.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]},b.prototype.equalsEpsilon=function(e,t){return b.equalsEpsilon(this,e,t)},b.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"};var M=Array.isArray;C.defined(M)||(M=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var x=M;e.GeographicProjection=a,e.Interval=function(e,t){this.start=f.defaultValue(e,0),this.stop=f.defaultValue(t,0)},e.Matrix3=b,e.isArray=x,e.objectToQuery=function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],a=encodeURIComponent(n)+"=";if(x(r))for(var i=0,o=r.length;i<o;++i)t+=a+encodeURIComponent(r[i])+"&";else t+=a+encodeURIComponent(r)+"&"}return t=t.slice(0,-1)}});
